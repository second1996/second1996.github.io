document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".s-catalog .s-catalog-category-slider"),t=document.querySelectorAll(".s-subcategory .s-subcategory-list"),i=window.matchMedia("(min-width: 767.98px)");e.length&&e.forEach((e,t)=>{let a;e.classList.add("s-catalog-category-slider-"+t);var r=function(){if(!0!==i.matches)return!1===i.matches?n():void 0;void 0!==a&&a.destroy(!0,!0)},n=function(){a=new Swiper(".s-catalog .s-catalog-category-slider-"+t,{loop:!1,speed:650,spaceBetween:10,autoHeight:!0,pagination:{el:".s-catalog .s-catalog-category-slider-"+t+" .swiper-pagination",type:"bullets",clickable:!0}})};i.addListener(r),r()}),t.length&&t.forEach((e,t)=>{let a;var r=function(){if(!0!==i.matches)return!1===i.matches?n():void 0;void 0!==a&&a.destroy(!0,!0)},n=function(){a=new Swiper(".s-subcategory .s-subcategory-list-slider",{loop:!1,speed:650,spaceBetween:10,autoHeight:!0,pagination:{el:".s-subcategory .s-subcategory-list-slider .swiper-pagination",type:"bullets",clickable:!0}})};i.addListener(r),r()});brandsGrid=function(){let e=document.querySelectorAll(".s-catalog-brands-item");for(let t,i=0;t=e[i];i++){t.classList.remove("s-catalog-brands-item-ready");let e=t.offsetHeight,i=Math.ceil(e/20);t.style.gridRowEnd="span "+i,t.classList.add("s-catalog-brands-item-ready")}},window.addEventListener("load",brandsGrid),window.addEventListener("resize",()=>{clearTimeout(brandsGrid.resizeTimer),brandsGrid.resizeTimer=setTimeout(brandsGrid,50)});var a=document.querySelectorAll(".filter-slider-handle");a.length&&(initFilterSlider=function(){a.forEach(e=>{let t=parseInt(e.dataset.slidermin),i=parseInt(e.dataset.slidermax),a=e.nextElementSibling.querySelector(".filter-slider-from"),r=e.nextElementSibling.querySelector(".filter-slider-to"),n=parseInt(a.value),o=parseInt(r.value);function l(){var t,i;""!=a.value&&(t=a.value),""!=r.value&&(i=r.value),e.noUiSlider.set([t,i])}noUiSlider.create(e,{start:[n,o],connect:!0,range:{min:t,max:i}}),a.addEventListener("change",l),r.addEventListener("change",l),e.noUiSlider.on("update",(function(e,t){var i=e[t];0==t&&(a.value=Math.round(i)),1==t&&(r.value=Math.round(i))})),e.noUiSlider.on("end",(function(e,t){0==t&&$(a).change(),1==t&&$(r).change()})),document.querySelector(".filter-reset").addEventListener("click",(function(){e.noUiSlider.set([parseInt(e.dataset.slidermin),parseInt(e.dataset.slidermax)]),a.setAttribute("value",parseInt(e.dataset.slidermin)),r.setAttribute("value",parseInt(e.dataset.slidermax))}))})},initFilterSlider()),reinitFilterSlider=function(){$(".filter-toggle-header._toggled, .widget-header._toggled").next().css("display","block"),a=document.querySelectorAll(".filter-slider-handle"),initFilterSlider()};var r=document.querySelector("#m-discount-slider");if(void 0!==r&&null!=r){var n=parseInt(r.dataset.slidermin),o=parseInt(r.dataset.slidermax),l=document.querySelector(".discount-modal-slider-value");noUiSlider.create(r,{start:n+1,step:1,connect:[!0,!1],range:{min:n,max:o}}),l.value=Math.round(r.noUiSlider.get())+"%",r.noUiSlider.on("update",(function(e){l.value=Math.round(e)+"%",function(e){var t=document.querySelector(".product-single .product-price .price-wrapper ins").dataset.finalPrice,i=parseInt(t),a=document.querySelector(".discount-modal-new-price"),r=i*Math.round(e)/100;a.value=Math.round(i-r).toLocaleString("ru")+" Руб."}(e)}))}})),jQuery(document).ready((function(e){if(e(".clone-widgets").length&&window.matchMedia("(max-width: 991.98px)").matches&&e(".page-widgets").appendTo(".clone-widgets"),e(".product-complect").length&&window.matchMedia("(min-width: 768px)").matches){var t=e(".product-complect"),i=t.offset().top-100;e(window).on("scroll load",(function(){e(window).scrollTop()>=i?t.addClass("_sticky"):t.removeClass("_sticky")}))}e(".filter-toggle-header._toggled, .widget-header._toggled").next().css("display","block"),e(".widget-filters-form").on("change",(function(){e(this).find(".filter-triggers").show()}));var a=new Swiper(".product-single .product-preview-thumbs-slider",{allowTouchMove:!0,loop:!1,slidesPerView:5,spaceBetween:6,pagination:{el:".product-preview-thumbs-slider .swiper-pagination",type:"bullets",clickable:!0},breakpoints:{576:{allowTouchMove:!1,slidesPerView:"auto",spaceBetween:0,pagination:!1}}});new Swiper(".product-single .product-preview-photo-slider",{effect:"fade",fadeEffect:{crossFade:!0},grabCursor:!0,loop:!1,slidesPerView:1,thumbs:{swiper:a}});e(".product-preview-photo-zoom > a").on("click",(function(){var t=e(".product-preview-photo-slider .swiper-slide-active").data("product-full-preview");e(this).attr("href",t)})),e(".clone-product-summary").length&&window.matchMedia("(max-width: 991.98px)").matches&&e(".product-main-right").appendTo(".clone-product-summary"),e('[data-toggle="delivery-datepicker"]').length&&(moment.locale("ru"),e('[data-toggle="delivery-datepicker"]').each((function(t,i){e(i).dateRangePicker({language:"ru",autoClose:!0,startDate:new Date,selectForward:!0,startOfWeek:"monday",minDays:1,maxDays:30,setValue:function(t,i,a){var r=e(this).find("input.delivery-from"),n=e(this).find("input.delivery-to"),o=e(this).find(".delivery-output"),l=moment(i),d=moment(a);r.val(i),n.val(a),o.text("От "+l.format("D MMMM")+" до "+d.format("D MMMM"))},customOpenAnimation:function(t){e(this).fadeIn(200,t)},customCloseAnimation:function(t){e(this).fadeOut(200,t)}})})))}));